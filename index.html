
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Steven Brooks' Blog</title>
  <meta name="author" content="Steven Brooks">

  
  <meta name="description" content="Here&rsquo;s the scenario. You have a site you created locally. It has file uploading. You have a domain name. You don&rsquo;t want to take forever &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://stevenabrooks.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Steven Brooks' Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Steven Brooks' Blog</a></h1>
  
    <h2>Student @Flatiron School</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:stevenabrooks.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/27/push-to-heroku/">Heroku, AWS, DNS Simple</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-27T09:25:00-05:00" pubdate data-updated="true">Dec 27<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&rsquo;s the scenario.  You have a site you created locally.  It has file uploading.  You have a domain name.  You don&rsquo;t want to take forever compiling assets and doing all that stuff to push the code to a server.</p>

<p>Okay, that&rsquo;s probably not a lay up that you have all those things.  But I had to find a way to get those images to same in production and find an easy way just to push the code to production.</p>

<p>To do this I used three things:</p>

<ol>
<li><a href="https://www.heroku.com/%E2%80%8E">Heroku</a></li>
<li><a href="http://aws.amazon.com/">AWS</a></li>
<li><a href="https://dnsimple.com/domains">DNS Simple</a></li>
</ol>


<p>Let&rsquo;s start from the top.  Heroku. Things to note here.  You have to use at least rails 3 and ruby 2.  I was not using ruby 2 so we have to go into our gemfile and add the line:</p>

<p>ruby &lsquo;2.0.0&rsquo;</p>

<p>and then run the bundler.  You might have an issue or two with other gems but the bundler usually tells you that you can do to fix it.</p>

<p>Now, Heroku also requires you use a Postgresql database in production, so we need to take our sqlite3 db and add it to the test and development groups on our gem file and add the &lsquo;pg&rsquo; gem to our production group.  Bundle it.  Okay Heroku is &ldquo;ready&rdquo;.</p>

<p>Now on to AWS.  This is where I will be storing my files that are uploaded to my application.  Since <a href="https://github.com/carrierwaveuploader/carrierwave">CarrierWave</a> is just hosting them locally, I will need a way for those files to work in production.  To set up AWS, you need to first go and create an account.  I&rsquo;m not going to tell you how to do that.  First, you need to add the &ldquo;fog&rdquo; gem to your gemfile and bundle.</p>

<p>Then make an initializer file.  Mine is called &ldquo;carrierwave.rb&rdquo; because I am using carrierwave for file processing.  Here is my initializer file:</p>

<p><img src="/images/aws.png" alt="My params" /></p>

<p>Pretty simple all we have to do if add our aws_access_key_id, aws_secret_access_key, and our fog_directory.  Super simple, and now when we upload files they will be saved in our backer on S3.</p>

<p>Let throw it up on heroku and see what&rsquo;s going on.  Follow this tutorial if you don&rsquo;t know how to set yourself up on <a href="https://devcenter.heroku.com/articles/getting-started-with-rails3">Heroku</a>.  It&rsquo;s a joke how easy it is.</p>

<p>But now we have a app on Heroku and the files are storage on AWS so they will work in production, but now we want to use our super cool domain that we bought from GoDaddy.  No problem.  Enter <a href="https://dnsimple.com/domains">DNS Simple</a>.</p>

<p>We head to <a href="https://dnsimple.com/domains">DNS Simple</a>, and set up an account.  After we log in, we add a domain.  Then we go to services, and scroll down to Heroku and click on that.  Then we go back and click on the Advanced Editor where we see our domain with an ALIAS and CNAME.  Change the content of the ALIAS to your url (with the www) and the content of the CNAME to your heroku app&rsquo;s url.  This tells your domain to redirect everything to your heroku url.  Now head on back to heroku and go into the settings of your app.  GO down to url&rsquo;s and add the the cool url.</p>

<p>You have now successfully pushed an app to production, made the files work in production, and set up that code on your fancy url.  Nice</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/18/rails-upload-download/">Upload/Download in Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-18T09:25:00-05:00" pubdate data-updated="true">Dec 18<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Okay I&rsquo;m back.  When we last left we had two request for the current app I&rsquo;m working on.  We nailed the first, now on to the second task.  We are supposed to allow the client to upload files so that people can download them from the app.  Again, no idea before I started.</p>

<p>Well here&rsquo;s something nice, I already am using <a href="https://github.com/carrierwaveuploader/carrierwave">CarrierWave</a> and feel pretty comfortable with it.  A thing to note is that most people assume this gem is only good for uploading images (likely due to the <a href="http://railscasts.com/episodes/253-carrierwave-file-uploads">Railscast episode</a>). It&rsquo;s not, actually its great for many files (I am currently upload .mp3, .mp4, .mov, and .wav files).</p>

<p>So I know how to upload the files, but how do you view the file or download it?</p>

<p>I stumbled upon how to view the file when I was trying to make it download:</p>

<p><img src="/images/linkview.png" alt="My params" /></p>

<p>We are simply linking to where the upload attachment is.  Now for download:</p>

<p><img src="/images/linkdownload.png" alt="My params" /></p>

<p>Here we are linking to the attachment url and downloading the file.  Not bad once you know how to do it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/18/acts_as_list/">Acts_as_List With Active Admin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-18T09:23:00-05:00" pubdate data-updated="true">Dec 18<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today has been a great day for me thus far.  For the current site I am working on, the client requested two features recently:</p>

<p>1) Allow him to reposition images(order)</p>

<p>2) Allow him to upload files and have his clients view/download them</p>

<p>Cool.  Had no idea how to do either off the top of my head.  Let&rsquo;s try to tackle the first one.</p>

<p>On a high level, I was thinking this process should go something like this:</p>

<ul>
<li>See if an object had been updated</li>
<li>Find out which object that was</li>
<li>See the new position is has and if that position is already taken up</li>
<li>Track whether that object went up or down in position</li>
<li>Change the other positions accordingly</li>
</ul>


<p>Myself and <a href="https://twitter.com/aviflombaum">Avi</a> were actually constructing the code to write this whole thing out.  We started by writing a rails test:</p>

<p><img src="/images/unittest.png" alt="My params" /></p>

<p>Here we are testing to see if we change the position of a studio, we need the other studios&#8217; positions to change accordingly.</p>

<p>Now here&rsquo;s the real issue, all of the CRUD of an object in this app is being done by <a href="http://www.activeadmin.info/">Active Admin</a>.  Actually I guess it wasn&rsquo;t so hard to know where to look to solve this problemâ€¦callbacks.</p>

<p>Cool we here the best this to do is the have a before_save callback.  We need to check if the  current object has been changed.  But wait, duh, there&rsquo;s this thing called <a href="https://github.com/swanandp/acts_as_list">acts_as_list</a> that does the reordering for you.  Luckily, this gem has a method (:insert_at(#)) that not only inserts the object where you want it but also reorders the list, doing the heavy lifting for us.</p>

<p>Great.  The idea that this process requires a before_save callback is right, and now we just need to connect the dots.  We must ask if a object has been changed, then insert it accordingly:</p>

<p><img src="/images/beforefilter.png" alt="My params" /></p>

<p><img src="/images/actslist.png" alt="My params" /></p>

<p>and bam, we can change any object to have a different position and the rest of the positions are reordered, and it works with Active Admin.  Check.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/10/fancybox-gallery/">FancyBox Gallery Trix</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-10T10:23:00-05:00" pubdate data-updated="true">Dec 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cool, so one of the features my latest client is asking me to do is adding is an image gallery of their studios.  After searching around for a little bit, I stumbled upon the <a href="https://github.com/hecticjeff/fancybox-rails">Fancybox Rails</a> gem.  Cool, let&rsquo;s check it out.</p>

<p>This gem is great, it adds all the assets required for <a href="http://fancybox.net/">Fancybox</a> to your assets, and all you have to do is add:</p>

<p>//= require fancybox</p>

<p>to your application.js file and:</p>

<p>*= require fancy box</p>

<p>to your application.css file.</p>

<p>Awesome.  Now that all of that is squared away, let&rsquo;s get to work.  In our controller we are working with this array:</p>

<p><img src="/images/galleryall.png" alt="My params" /></p>

<p>This is an array of all the pictures we are working with.  If we want to loop through all of these, we use the following code:</p>

<p><img src="/images/fancyloop.png" alt="My params" /></p>

<p>If we throw on a little jQuery, we get a workable Fancybox:</p>

<p><img src="/images/fancycode.png" alt="My params" /></p>

<p>What happens here is were are looking through all the paintings in the gallery and setting them to the same :rel.  This allows Fancybox to know all images with :rel &ldquo;studio_images&rdquo; is to be grouped together in a gallery.</p>

<p>The problem here is that we now have eight links, with all eight links opening up to the same gallery.  That&rsquo;s not good, we want one link to open to all of the images in the gallery.  Cool, let&rsquo;s solve this problem.</p>

<p>How about we make two instance variables in the controller, one for the first image, and one for the rest, this way if we ever delete the first image, another will replace it.  The benefit here is that there will be no image duplication because between the two arrays, we will have all the images, but no duplicates.</p>

<p><img src="/images/fancycontroller.png" alt="My params" /></p>

<p>So now we have these two variable, and we need to make a link in the view to open the gallery.  Let&rsquo;s do that:</p>

<p><img src="/images/click_thing.png" alt="My params" /></p>

<p>If you have noticed, both lines of code have different id&rsquo;s, can you guess why?  If we have both lines of code, we will have eight different links.  We only want one link, let&rsquo;s hide the second array.</p>

<p><img src="/images/fancyhide.png" alt="My params" /></p>

<p>And you are left with one link which points to all the images in your gallery, good work.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/10/highlight-current-page-rails/">Highlight Current Page Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-10T09:23:00-05:00" pubdate data-updated="true">Dec 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ll admit, I am not an authority figure when it comes to front end.  I&rsquo;m not talking about things like <a href="http://getbootstrap.com/">Bootstrap</a>, I&rsquo;m talking about getting super down and dirty within a stylesheet.</p>

<p>I had a fun little problem to solve yesterday when working on the site for my current client.  The client wanted the page the user was currently on to be highlighted in the navbar.</p>

<p>I immediately thought to add some sort of conditional, but went strait to <a href="http://stackoverflow.com/">Stack Overflow</a> to see what programmers before me have done.</p>

<p>Turns out, there are two ways you can do something like this.  In both scenarios, we are going to create a helper method, but the helper method can check different things.</p>

<p>For those who are not making a navbar dynamically, I would suggest using the following:</p>

<p><img src="/images/controllermethod.png" alt="My params" /></p>

<p><img src="/images/controllercode.png" alt="My params" /></p>

<p>This way, you can have the helper method return some thing (in this case, the name of the new class) depending on what controller the request is using.</p>

<p>If you are going to dynamically create the navbar, I suggest you do something like this:</p>

<p><img src="/images/pathmethod.png" alt="My params" /></p>

<p><img src="/images/pathcode.png" alt="My params" /></p>

<p>This way, the helper is checking the request url, and simply passing in the path.  I actually found this second way of doing this buggy because the root path becomes highlighted for all the other paths.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/09/serializing-model-attributes/">Serialize Attributes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-09T09:23:00-05:00" pubdate data-updated="true">Dec 9<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So after I successfully jail-rigged my blog, I can now make new posts.  I have a bunch that I want to talk about, but one I wanted touch on today was serializing attributes for a model.</p>

<p>Here is the scenario.  One of the index pages for my currently client lists all the items they have available for rent (it&rsquo;s a music company).  They have microphones, computers, instruments, anything you could rent.  It&rsquo;s probably about 10 different categories of products that a customer can rent.</p>

<p>I built the back end with <a href="http://www.activeadmin.info/">ActiveAdmin</a> so the client can easily change the content of the site.  The previous developer had hard coded all of the content, and the client was not comfortable going into the actual code to make changes.</p>

<p>So we have a rental page that lists all the items for rent.  Because there are 10 different categories of items, do I want to make 10 different models and do the proper associations, or because the items only have names do I want to come up with something else?</p>

<p>I found out that I could serialize an attribute in rails.  Its super simple:</p>

<p><img src="/images/serialize.png" alt="My params" /></p>

<p>What we are doing his is simple, rather than creating a whole nothing model and creating the association, this model (staff), can have many titles, but those titles cannot have many attributes.</p>

<p>This was a really good way for allow the client to add many single attribute attributes to a model.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/06/test/">Test</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-06T00:00:00-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If this works I have figured out how to jail rig posts.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/25/im-back/">I&#8217;m Back</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-25T17:08:00-05:00" pubdate data-updated="true">Nov 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dear Everyone Who Has Read My Blog,</p>

<p>According to my watch, it should have been about two months since I last blogged.  These past two months have been a very challenging time for me as my father recently passed away.</p>

<p>I will be starting up my blog again soon as within the last week or so I have been able to get back to programming.  One of the things I have been working on has been speeding up my Workout App and adding Eager Loading into my application.  Thus far I have eliminated a little over 60% of my queries.</p>

<p>Actually it&rsquo;s probably better I do some stuff now.  In my Workout App the individual workouts #show page has a visual representation of a users workout through the Google Charts.  Originally, my #show action looked like this:</p>

<p><img src="/images/firstshow.png" alt="My params" /></p>

<p>Very strait forward, I had created a :graph method that would all the charts to work.  When I do this, here is what the queries look like:</p>

<p><img src="/images/firstquery.png" alt="My params" /></p>

<p>Yuck, that&rsquo;s 18 queries, and although it&rsquo;s not very slow on my current app, if this workout had more than a few exercises with a few sets, it could be much slower.</p>

<p>Then I started looking into Eager Loading, which allowed me to turn my #show action into:</p>

<p><img src="/images/secondshow.png" alt="My params" /></p>

<p>Here, I am loading the routine for the action, that routine belongs to a user and has many lifts.  Those lifts belong to an exercise and have many infos.  So now when I Eager Load into the instance of routine and run the :graph method, we get this:</p>

<p><img src="/images/secondquery.png" alt="My params" /></p>

<p>Just 5 queries.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/07/a-lot-to-come-ahead/">A Lot to Come Ahead</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-07T18:08:00-04:00" pubdate data-updated="true">Oct 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Everyone,</p>

<p>Unfortunately that last few days I have not been able to update my blog due to a family emergency.  The good news is that I have still been finding a few hours here and there to get some coding work in.  In the past few days I have authenticated users with Devise and Omiauth (together) as well as added the Letsrate gem to my workout application (allowing each exercise to have a 5 star rating).  I plan on writing at least 2 post from these topics when I get a chance.  I also spun up an app with the ActiveAdmin gem but I will only be giving a link to the pseudo (a little outdated) blog I followed for it.  I will also be added a post for some of the gotcha&rsquo;s I encountered while setting up Rspec and FactoryGirl today.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/05/push-it-real-good/">Push It Real Good</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-05T18:23:00-04:00" pubdate data-updated="true">Oct 5<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Real quick post today on deployment.</p>

<p>The apps I made thus far have all been deployed following these guidelines:</p>

<p><a href="http://stackoverflow.com/">Spike Grobstein = Beast</a></p>

<p>If you were able to successfully deploy your rails app to production via Capistrano you have done all the heavy lifting already.  If you make new changes that you would like to push to the server all you have to do is <a href="https://twitter.com/Chris_GonzGonz">thanks for my boy Chris Gonzales</a>:</p>

<ol>
<li>Go into your public folder on your local machine and write the command:</li>
</ol>


<p>cap deploy:setup</p>

<ol>
<li>Follow it up by the command:</li>
</ol>


<p>cap deploy</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/27/push-to-heroku/">Heroku, AWS, DNS Simple</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/18/rails-upload-download/">Upload/Download in Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/18/acts_as_list/">Acts_as_List With Active Admin</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/10/fancybox-gallery/">FancyBox Gallery Trix</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/10/highlight-current-page-rails/">Highlight Current Page Rails</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/stevenabrooks">@stevenabrooks</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'stevenabrooks',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Steven Brooks -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
